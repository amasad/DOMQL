<!DOCTYPE html>
  <html lang="en">
    <head>
      <link rel="stylesheet" href="bootstrap.css">
      <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
      <script>
      /* =============================================================
       * bootstrap-scrollspy.js v1.4.0
       * http://twitter.github.com/bootstrap/javascript.html#scrollspy
       * =============================================================
       * Copyright 2011 Twitter, Inc.
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       * http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       * ============================================================== */


      !function ( $ ) {

        "use strict"

        var $window = $(window)

        function ScrollSpy( topbar, selector ) {
          var processScroll = $.proxy(this.processScroll, this)
          this.$topbar = $(topbar)
          this.selector = selector || 'li > a'
          this.refresh()
          this.$topbar.delegate(this.selector, 'click', processScroll)
          $window.scroll(processScroll)
          this.processScroll()
        }

        ScrollSpy.prototype = {

            refresh: function () {
              this.targets = this.$topbar.find(this.selector).map(function () {
                var href = $(this).attr('href')
                return /^#\w/.test(href) && $(href).length ? href : null
              })

              this.offsets = $.map(this.targets, function (id) {
                return $(id).offset().top
              })
            }

          , processScroll: function () {
              var scrollTop = $window.scrollTop() + 10
                , offsets = this.offsets
                , targets = this.targets
                , activeTarget = this.activeTarget
                , i

              for (i = offsets.length; i--;) {
                activeTarget != targets[i]
                  && scrollTop >= offsets[i]
                  && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
                  && this.activateButton( targets[i] )
              }
            }

          , activateButton: function (target) {
              this.activeTarget = target

              this.$topbar
                .find(this.selector).parent('.active')
                .removeClass('active')

              this.$topbar
                .find(this.selector + '[href="' + target + '"]')
                .parent('li')
                .addClass('active')
            }

        }

        /* SCROLLSPY PLUGIN DEFINITION
         * =========================== */

        $.fn.scrollSpy = function( options ) {
          var scrollspy = this.data('scrollspy')

          if (!scrollspy) {
            return this.each(function () {
              $(this).data('scrollspy', new ScrollSpy( this, options ))
            })
          }

          if ( options === true ) {
            return scrollspy
          }

          if ( typeof options == 'string' ) {
            scrollspy[options]()
          }

          return this
        }

        $(document).ready(function () {
          $('body').scrollSpy('[data-scrollspy] li > a')
        })

      }( window.jQuery || window.ender );
      </script>
      <meta charset="utf-8">
      <title>DOMQL</title>
      <meta name="description" content="">
      <meta name="author" content="">

      <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
      <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

      <style type="text/css">
        /* Override some defaults */
        html, body {
          background-color: #eee;
        }
        body {
          padding-top: 40px; /* 40px to make the container go all the way to the bottom of the topbar */
        }
        .container > footer p {
          text-align: center; /* center align it with the container */
        }
        .container {
          width: 820px; /* downsize our container to make the content feel a bit tighter and more cohesive. NOTE: this removes two full columns from the grid, meaning you only go to 14 columns and not 16. */
        }

        /* The white background content wrapper */
        .content {
          background-color: #fff;
          padding: 20px;
          margin: 0 -20px; /* negative indent the amount of the padding to maintain the grid system */
          -webkit-border-radius: 0 0 6px 6px;
             -moz-border-radius: 0 0 6px 6px;
                  border-radius: 0 0 6px 6px;
          -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
             -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                  box-shadow: 0 1px 2px rgba(0,0,0,.15);
        }

        /* Page header tweaks */
        .page-header {
          padding: 20px 20px 10px;
          margin: -20px -20px 20px;
        }

        /* Styles you shouldn't keep as they are for displaying this base example only */
        .content .span10,
        .content .span4 {
          min-height: 500px;
        }
        /* Give a quick and non-cross-browser friendly divider */
        .content .span4 {
          margin-left: 0;
          padding-left: 19px;
          border-left: 1px solid #eee;
        }

        .topbar .btn {
          border: 0;
        }
        .page-header .brand {
          font-size: 60px;
          color:red!important;
        }
        .brand {
          color:#FA524F!important;
        }
        .nav a{
          color:#800100;
        }
        .nav a:hover, .nav li.active a{
          color:#FA524F!important;
        }
        .lead {
          margin-top:10px;
          font-size: 14px;
          line-height: 23px;
          margin-bottom: 9px;
        }
        section {
          padding-top:40px;
        }
        #about {
          padding-top:5px;
        }
        .trademark{
          color:red;
        }
        li{
          color: black;
        }
      </style>

      <!-- Le fav and touch icons -->
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    </head>

    <body>
<a href="http://github.com/amasad/dql"><img style="z-index:10001;position: fixed; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a>
      <div class="topbar">
        <div class="fill">
          <div class="container">
            <a class="brand" href="#">DOMQL</a>
            <ul class="nav">
              <li class="active"><a href="#about">About</a></li>
              <li><a href="#feel">Feel Right At Home&#8482;</a></li>
              <li><a href="#todo">TODO App</a></li>
              <li><a href="#docs">Documentation</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="container">

        <div class="content">
          <div class="page-header">
            <h1 class="brand">DOMQL <small>DOM Query Language: Web development for DBAs</small></h1>
          </div>
          <div class="row">
            <div class="span14">
              <section id="about">
                <div class="page-header"><h1>About</h1></div>
                <div class="span12">
                  <p class="lead">
                  Lately we've come to learn that web development is indeed a basic human right. And it should be accessible to every developer in the industry.
                  jQuery made web development easier for designers, CoffeeScript for Rubyists and Pythonistas, Dart for Java devs, ClojureScript for Lispers etc.</p> 
                  <p class="lead">But what about DBAs? aren't they equally human? Should they be doomed to suffer learning all about JS and the DOM?</p>
                  <p class="lead">
                  DQL is here to make web development familiar to DBAs looking for a change of career (or suffering brain-damage). With a goal of making them
                  <span class="trademark">Feel Right At Home&#8482;</span>.</p>
                  <p class="lead">
                  DQL is not a fully-fledged programming language but a small DSL inspired by SQL aimed at easing DOM manipulation for DBAs.
              
                  Quick examples to make you feel warm and fuzzy (<span class="trademark">Feel Right At Home&#8482;</span>):</p>
                    <pre>SELECT DIV FROM BODY WHERE ID='container'</pre>
                    <pre>UPDATE (SELECT H1 FROM (SELECT DIV FROM BODY).ALL) SET CLASS='active' WHERE CLASS='disabled'</pre>
                    <pre>DELETE A FROM BODY.ALL WHERE HREF LIKE "google.com" AND ROWNUM BETWEEN 5 AND 10</pre>
                </div>
              </section>
              
              <section id="feel">
                <div class="page-header"><h1>Feel Right At Home&#8482;</h1></div>
                <div class="span12">
                  <h3>Speed</h3>
                  <p class="lead">
                    Just as in transactional DBMS you can write queries that are insanely slow.
                  </p>

                  <h3>DQL Injection</h3>
                  <p class="lead">
                  I tried my best to bring the stuff you most adore from SQL and I thought that Injections are a must have to make you <span class="trademark">Feel Right At Home&#8482;</span>.<br/>
                  Features added/removed to make injections possible:</p>
                  <ol>
                    <li>Insert `--` anywhere in the code to comment out the rest of the query.</li>
                    <li>Stacking queries. You can terminate any query with `;` and start a new one.</li>
                    <li>Nothing is sanitized.</li>
                  </ol>
                </div>
                <code>DOMQL("SELECT * FROM BODY WHERE CLASS='%s' AND ROWNUM > 2", "';DROP ELEMENT BODY;-- pwned! \o/")</code>
              </section>
              
              <section id="todo">
                <div class="page-header"><h1>TODO App</h1></div>
                <iframe style="width: 100%; height: 600px" src="http://jsfiddle.net/VENg2/16/embedded/html,result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
              </section>
              
              <section id="docs">
                <div class="page-header"><h1>Documentation</h1></div>
                <h2>Embedded queries.</h2>
                <p>Just like the TODO app example above you can embed your queries inside a script element with <code>type="text/domql"</code>
                  and these queries would be run as soon as the page loads. The following would add 2 divs to the body element with ids header and container respectively:</p>
                <pre>&lt;script type="test/domql"&gt;
  INSERT INTO BODY VALUES (
    CREATE ELEMENT DIV (
      id 'header'
    ),
    CREATE ELEMENT DIV (
      id 'container'
    )
  )
&lt;/script&gt;</pre>
                <p>Alternatively you could embed queries as templates using <code>text/domql-tmpl</code> script type. You could think of them as stored procedures.
                  Templates would then be accessible from anywhere in your app using <code>DOMQL.tmpl('tmpl-id')</code>. The function could also be passed
                  multiple arguments in a <code>printf()</code>-ish way. </p>
                <pre>&lt;script type="text/domql-tmpl" id="hello-user"&gt;
  CREATE ELEMENT SPAN (
    class 'greetings',
    innerText 'Hello %s'
  )
&lt;/script&gt;</pre>
                <h2>DOMQL from JavaScript</h2>
                <h3>DOMQL.tmpl()</h3>
                <p>Executes an embedded query template. <code>DOMQL.tmpl('hello-user', 'Amjad')</code></p>
                <h3>DOMQL()</h3>
                <p>To use DOMQL in JavaScript you could you just call the <code>DOMQL()</code> function passing it your query and any number of arguments (just like <code>DOMQL.tmpl</code>).
                <pre>DOMQL("UPDATE BODY SET style ='background:%s'", "red");</pre>
                <h3>DOMQL.ready()</h3>
                <p>Takes a JS function and executes it when the DOM is ready for manipulation.</p>
                <h2>Queries</h2>
                <h3>SELECT</h3>
                  <p><code>SELECT</code> [Optional function ex: <code>COUNT(</code>][html tags separated by a comma] <code>FROM</code> [a single html tag or a Query between parentheses] followed by optional where clause:<br/> <code>WHERE</code> [Expression: HTML Attribute or <code>ROWNUM</code> [Operator: <code>=/&gt;/&lt;/&lt;&gt;/IN/BETWEEN</code> Value(s)]] <code>AND</code>/<code>OR</code> [Other expression]...<p>
                <h3>UPDATE</h3>
                  <p><code>UPDATE</code> [a single html tag or a Query between parentheses] <code>SET</code> [single or multiple key = value separated by a comma] followed by an optional where clause.</p>
                <h3>DELETE</h3>
                  <p><code>DELETE</code> [html tags separated by commas] <code>FROM</code> [a single html tag or a Query between parentheses] followed by an optional where clause.</p>
                <h3>INSERT</h3>
                  <p><code>INSERT INTO</code> [a single html tag or a Query between parentheses] <code>VALUES (</code> [A single Query or multiple queries separated by commas] <code>)</code></p>
                <h3>CREATE</h3>
                <p><code>CREATE ELEMENT</code> [a single html tag] <code>(</code> [zero, one or multiple key value separated by commas] <code>)</code></p>
                <h3>DROP</h3>
                <p><code>DROP ELEMENT</code> [a single html tag or a Query between parentheses] </p>
                <h3>UNIONS COMING SOON...</h3>
              </section>
              
              <section id="contact">
                <div class="page-header"><h1>Contact</h1></div>
                 <a href="http://twitter.com/amjad_masad">Twitter</a><br/>
                 <a href="mailto:amjad.masad@gmail.com">Email</a>
              </section>
            </div>
          </div>
        </div>

      </div> <!-- /container -->
      <script>$('.topbar').scrollSpy()</script>
    </body>
  </html>
